#!/usr/bin/env sh
HUSKY_SH="$(dirname -- "$0")/_/husky.sh"
if [ -f "$HUSKY_SH" ]; then
  . "$HUSKY_SH"
fi

# Exit on any error
set -e

# Get repository root directory
REPO_ROOT="$(git rev-parse --show-toplevel)"
cd "$REPO_ROOT" || exit 1

# Frontend linting
cd igad-app/frontend
npx lint-staged || exit 1

# Backend linting - return to repo root first
cd "$REPO_ROOT"
cd igad-app/backend
make check || exit 1
